<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Asynchronous JavaScript</title>
</head>
<body>
    <h1>Asynchronous JavaScript</h1>
    <script>
        /****
        1. С помочью функции fetch() получаем данные по ссылке
           - https://api.github.com/repos/javascript-tutorial/en.javascript.info/commits
        2. Используем then() для обработки полученных данных (преобразуем в json)
        3. Используем then() для выделения определенных данных
        4. Используем catch() для обработки ошибок
        5. Оборачиваем в функцию, с передаечей параметра локации
        ****/
        
        function getWeather(woeid) {
            fetch(`https://cors-anywhere.herokuapp.com/https://www.metaweather.com/api/location/${woeid}/`)
            .then(result => {
                return result.json();
            }).then(data => {
                const city = data.title;
                const tempurature = data.consolidated_weather[0].the_temp;
                console.log(`Погода в ${city} сейчас ${tempurature} цельсия`);
            }).catch(error => console.log(error));
        }
        
        // London
        getWeather(44418)
        // San Francisco
        getWeather(2487956)
        
    </script>
</body>
</html>